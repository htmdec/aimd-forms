{
  "type": "object",
  "title": "Weihs Lab Target Configuration",
  "description": "Configure the target for the build.",
  "properties": {
    "sources": {
      "type": "array",
      "propertyOrder": 3,
      "items": {
        "type": "object",
        "id": "arr_item",
        "properties": {
          "source": {
            "type": "string",
            "description": "The ID of the source file to be included in the build.",
            "enumSource": "girder.formId:684c34979827d47f69fc31cd:{entry[data][element]} - {entry[_id]}"
          },
          "element": {
            "type": "string",
            "format": "hidden",
            "options": {
              "hidden": true
            },
            "watch": {
              "source": "arr_item.source"
            },
            "template": "{{ split source '-' 0 }}"
          },
          "sourceId": {
            "type": "string",
            "format": "hidden",
            "options": {
              "hidden": true
            },
            "watch": {
              "source": "arr_item.source"
            },
            "template": "{{ split source '-' 1 }}"
          }
        }
      },
      "minItems": 1,
      "description": "List of source files to be included in the build. Each source file should be specified by its ID."
    },
    "creationDate": {
      "type": "string",
      "format": "date",
      "description": "Select the date when the target was created. Click on the input field to open a date picker. The date should be in the format YYYYMMDD (e.g., 20231001 for October 1, 2023).",
      "minLength": 8,
      "maxLength": 8,
      "options": {
        "flatpickr": {
          "dateFormat": "Ymd",
          "allowInput": true
        }
      },
      "propertyOrder": 1
    },
    "suffix": {
      "type": "string",
      "desciption": "A suffix to be appended to the target name. This can be used to differentiate between multiple targets with similar names.",
      "default": "",
      "propertyOrder": 2
    },
    "name": {
      "type": "string",
      "description": "The name of the target. This field is autogenerated based on 'creationDate', chemical elements in 'sources' and 'suffix'. It has to be unique.",
      "watch": {
        "sources": "sources",
        "creationDate": "creationDate",
        "suffix": "suffix"
      },
      "template": "{{ aimd-target sources }}{{ creationDate }}{{ suffix }}",
      "propertyOrder": 0
    },
    "calibSlope": {
      "type": "number",
      "title": "Calibration Slope",
      "description": "The calibration slope for the target. This value is used to adjust the calibration of the target.",
      "propertyOrder": 4
    },
    "calibIntercept": {
      "type": "number",
      "title": "Calibration Intercept",
      "description": "The calibration intercept for the target. This value is used to adjust the calibration of the target.",
      "propertyOrder": 5
    },
    "notes": {
      "type": "string",
      "description": "Additional notes or comments about the target.",
      "propertyOrder": 6
    }
  },
  "required": [
    "sources",
    "creationDate",
    "name"
  ]
}
