{
  "definitions": {
    "gunMeasurement": {
      "type": "object",
      "format": "grid-strict",
      "properties": {
        "voltage": {
          "type": "number",
          "description": "Voltage (V)",
          "propertyOrder": 1,
          "options": {
            "grid_columns": 4
          }
        },
        "current": {
          "type": "number",
          "description": "Current (A)",
          "propertyOrder": 2,
          "options": {
            "grid_columns": 4
          }
        },
        "power": {
          "type": "number",
          "description": "Power (W)",
          "propertyOrder": 3,
          "options": {
            "grid_columns": 4,
            "grid_break": true
          }
        }
      }
    },
    "measurement": {
      "type": "object",
      "format": "grid-strict",
      "properties": {
        "time": {
          "type": "string",
          "description": "Time (YYYY-MM-DDTHH:MM:SS)",
          "format": "date-time",
          "propertyOrder": 1,
          "options": {
            "grid_columns": 6
          }
        },
        "rotation": {
          "type": "number",
          "description": "Rotation (degrees)",
          "propertyOrder": 2,
          "options": {
            "grid_columns": 6,
            "grid_break": true
          }
        },
        "blue": {
          "type": "object",
          "$ref": "#/definitions/gunMeasurement",
          "title": "Blue Gun",
          "options": {
            "dependencies": {
              "root.blueGun.used": true
            },
            "grid_columns": 12,
            "grid_break": true
          }
        },
        "orange": {
          "type": "object",
          "options": {
            "dependencies": {
              "root.orangeGun.used": true
            },
            "grid_columns": 12,
            "grid_break": true
          },
          "$ref": "#/definitions/gunMeasurement",
          "title": "Orange Gun"
        },
        "green": {
          "type": "object",
          "$ref": "#/definitions/gunMeasurement",
          "title": "Green Gun",
          "options": {
            "dependencies": {
              "root.greenGun.used": true
            },
            "grid_columns": 12,
            "grid_break": true
          }
        },
        "purple": {
          "type": "object",
          "$ref": "#/definitions/gunMeasurement",
          "title": "Purple Gun",
          "options": {
            "dependencies": {
              "root.purpleGun.used": true
            },
            "grid_columns": 12,
            "grid_break": true
          }
        }
      }
    },
    "coloredGun": {
      "type": "object",
      "properties": {
        "used": {
          "type": "boolean",
          "format": "checkbox",
          "propertyOrder": 1,
          "title": "Used",
          "description": "Whether the gun was used.",
          "default": false,
          "propertyOrder": 1,
          "options": {
            "grid_columns": 1
          }
        },
        "sputter": {
            "type": "object",
            "$ref": "#/definitions/sputter",
            "propertyOrder": 2,
            "title": "Sputter Parameters",
            "description": "Parameters for the sputter gun.",
            "propertyOrder": 2,
            "options": {
              "dependencies": {
              "used": true
            },
            "grid_columns": 12
          }
        }
      }
    },
    "sputter": {
      "type": "object",
      "format": "grid-strict",
      "properties": {
        "gun": {
          "type": "string",
          "enumSource": "girder.formId",
          "propertyOrder": 1,
          "options": {
            "grid_columns": 3
          }
        },
        "target": {
          "type": "string",
          "description": "Target material",
          "enumSource": "girder.formId",
          "propertyOrder": 2,
          "options": {
            "grid_columns": 3
          }
        },
        "powerSupply": {
          "type": "string",
          "description": "Power supply",
          "enumSource": "girder.formId",
          "propertyOrder": 3,
          "options": {
            "grid_columns": 3
          }
        },
        "power": {
          "type": "number",
          "description": "Power (W)",
          "propertyOrder": 4,
          "options": {
            "grid_columns": 3,
            "grid_break": true
          }
        },
        "phi": {
          "type": "number",
          "description": "Angle to horizontal (degrees)",
          "propertyOrder": 5,
          "options": {
            "grid_columns": 3
          }
        },
        "waterFlow": {
          "type": "number",
          "description": "Water flow rate (gal/min)",
          "propertyOrder": 6,
          "options": {
            "grid_columns": 3
          }
        },
        "startTime": {
          "type": "string",
          "description": "Start time (YYYY-MM-DDTHH:MM:SS)",
          "propertyOrder": 7,
          "format": "date-time",
          "options": {
            "grid_columns": 3
          }
        },
        "endTime": {
          "type": "string",
          "description": "End time (YYYY-MM-DDTHH:MM:SS)",
          "propertyOrder": 8,
          "format": "date-time",
          "options": {
            "grid_columns": 3,
            "grid_break": true
          }
        }
      }
    }
  },

  "type": "object",
  "format": "grid-strict",
  "title": "Weihs Lab Sputter Record",
  "description": "Data recording a single sputter deposition run.",
  "properties": {
    "name": {
      "type": "string",
      "title": "User",
      "description": "The name of the person doing the sputter run.",
      "options": {
        "grid_columns": 6
      },
      "propertyOrder": 1
    },
    "sputterType": {
      "type": "string",
      "propertyOrder": 2,
      "description": "The age of the person.",
      "options": {
        "grid_columns": 6,
        "grid_break": true
      },
      "enum": [
        "Horizontal",
        "Vertical"
      ]
    },
    "substrateType": {
      "type": "string",
      "propertyOrder": 3,
      "description": "Substrate type",
      "enum": [
        "Si",
        "SiO2",
        "Glass",
        "Other"
      ],
      "options": {
        "grid_columns": 3
      }
    },
    "substrateOrientation": {
      "type": "number",
      "propertyOrder": 4,
      "description": "Substrate orientation",
      "default": 0,
      "options": {
        "grid_columns": 3
      }
    },
    "bilayerSpacing": {
      "type": "number",
      "propertyOrder": 5,
      "description": "Bilayer spacing (nm)",
      "default": 100.0,
      "options": {
        "grid_columns": 3
      }
    },
    "thickness": {
      "type": "number",
      "propertyOrder": 6,
      "description": "Total Thickness (Âµm)",
      "default": 100.0,
      "options": {
        "grid_columns": 3,
        "grid_break": true
      }
    },
    "gasType": {
      "type": "string",
      "propertyOrder": 7,
      "description": "Gas type",
      "enum": [
        "Argon",
        "Nitrogen",
        "Oxygen"
      ],
      "options": {
        "grid_columns": 6
      }
    },
    "gasFlowRate": {
      "type": "number",
      "propertyOrder": 8,
      "description": "Gas flow rate (gal/min)",
      "default": 1.0,
      "options": {
        "grid_columns": 6,
        "grid_break": true
      }
    },
    "label1": {
      "format": "info",
      "title": "Pre-sputter chamber status",
      "propertyOrder": 9,
      "options": {
        "grid_columns": 2,
        "grid_offset": 5,
        "grid_break": true
      }
    },
    "basePressure": {
      "type": "number",
      "propertyOrder": 10,
      "description": "Base pressure (Torr)",
      "default": 1.0e-6,
      "options": {
        "grid_columns": 4
      }
    },
    "leakRate": {
      "type": "number",
      "propertyOrder": 11,
      "description": "Leak rate (Torr/min)",
      "default": 1.0e-6,
      "options": {
        "grid_columns": 4
      }
    },
    "cryoTemp": {
      "type": "number",
      "propertyOrder": 12,
      "description": "Cryo temperature (K)",
      "default": 12.0,
      "options": {
        "grid_columns": 4,
        "grid_break": true
      }
    },
    "label2": {
      "format": "info",
      "title": "Sputter parameters",
      "propertyOrder": 13,
      "options": {
        "grid_columns": 2,
        "grid_offset": 5,
        "grid_break": true
      }
    },
    "blueGun": {
      "type": "object",
      "$ref": "#/definitions/coloredGun",
      "propertyOrder": 14,
      "title": "Blue Gun",
      "description": "Blue Gun",
      "options": {
        "grid_columns": 12
      }
    },
    "orangeGun": {
      "type": "object",
      "$ref": "#/definitions/coloredGun",
      "propertyOrder": 15,
      "title": "Orange Gun",
      "description": "Orange Gun",
      "options": {
        "grid_columns": 12
      }
    },
    "greenGun": {
      "type": "object",
      "$ref": "#/definitions/coloredGun",
      "propertyOrder": 16,
      "title": "Green Gun",
      "description": "Green Gun",
      "options": {
        "grid_columns": 12
      }
    },
    "purpleGun": {
      "type": "object",
      "$ref": "#/definitions/coloredGun",
      "propertyOrder": 17,
      "title": "Purple Gun",
      "description": "Purple gun",
      "options": {
        "grid_columns": 12
      }
    },
    "measurements": {
      "type": "array",
      "propertyOrder": 18,
      "title": "Measurements",
      "description": "Measurements taken during the sputter run.",
      "items": {
        "title": "Measurement",
        "$ref": "#/definitions/measurement"
      },
      "options": {
        "grid_columns": 12,
        "grid_break": true
      }
    },
    "sputterRunId": {
      "type": "string",
      "propertyOrder": 100,
      "title": "Sputter Run ID",
      "description": "The unique identifier for the sputter run.",
      "hidden": true,
      "options": {
        "grid_columns": 12,
        "hidden": true
      }
    }
  }
}
